version: 2

models:
  - name: stg_sqlserver__orders
    description: >
      This model represents the staging table for orders data imported from SQL Server.
      It includes details on order ID, shipping, costs, user, and related metadata.
    config:
      contract:
        enforced: true
    columns:
      - name: ORDER_ID
        data_type: text
        description: >
          Unique identifier for each order.
        constraints:
          - type: not_null
        tests:
          - not_null
          - unique
      - name: SHIPPING_SERVICE
        data_type: text
        description: >
          Name of the shipping service used for the order.
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: SHIPPING_COST
        data_type: float
        description: >
          Cost of shipping the order.
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: ADDRESS_ID
        data_type: text
        description: >
          Identifier of the address where the order is delivered.
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: CREATED_AT
        data_type: timestamp_tz(9)
        description: >
          Timestamp when the order was created.
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: PROMO_ID
        data_type: text
        description: >
          Identifier of the promotion applied to the order.
      - name: ESTIMATED_DELIVERY_AT
        data_type: timestamp_tz(9)
        description: >
          Estimated delivery time of the order.
      - name: ORDER_COST
        data_type: float
        description: >
          Cost of the order before shipping and promotions.
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: USER_ID
        data_type: text
        description: >
          Identifier of the user who placed the order.
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: ORDER_TOTAL
        data_type: float
        description: >
          Total cost of the order after shipping and promotions.
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: DELIVERED_AT
        data_type: timestamp_tz(9)
        description: >
          Timestamp when the order was delivered.
      - name: TRACKING_ID
        data_type: text
        description: >
          Tracking identifier for the order shipment.
      - name: STATUS
        data_type: text
        description: >
          Current status of the order.
        constraints:
          - type: not_null
        tests:
          - not_null
      - name: _FIVETRAN_DELETED
        data_type: boolean
        description: >
          Indicates if the record was marked as deleted by Fivetran.
      - name: _FIVETRAN_SYNCED
        data_type: timestamp_tz(9)
        description: >
          The timestamp when the data was synchronized by Fivetran.
        constraints:
          - type: not_null
        tests:
          - not_null
